FMW Database Schemas Export and Import Scripts  
Copyright (c) 2025 Oracle and/or its affiliates  
Licensed under the Universal Permissive License v 1.0 as shown at https://oss.oracle.com/licenses/upl/  

# FMW Database Schemas Export and Import Scripts
These scripts are designed to export and import the FMW database metadata repository from a source database to a target database. This method can be used to migrate the database used by an FMW domain as an alternative to rman backup and restore or Data Guard approaches.

| Script name  | Description |
| ------------- | ------------- |
| [export_fmw.sh](./export_fmw.sh) | This script exports the tablespaces, schemas and roles of an Oracle FMW domain. It uses Oracle Data Pump Export and DDL statements to extract the information from the PDB used by the FMW system (typically a JRF or SOA domain). It creates an output tar that can be transferred to another database system to migrate the original FMW domain. |
| [import_fmw.sh](./import_fmw.sh) | This script imports the tablespaces, schemas and roles of an Oracle FMW domain. It uses Oracle Data Pump Import and DDL statements to import the output generated by the [export_fmw.sh](./export_fmw.sh) to a different PDB or to an entirely different database. |

### Features
- The scripts use **Oracle Data Pump** and DDL statements to export/import the information.
- The scripts export all the schemas, tablespaces, roles and permissions of the schemas that start with the **RCU PREFIX** provided as input.
- The scripts also export and import the FMW metadata information that resides in the SYSTEM schema (the **schema_registry** objects) related with the RCU PREFIX schemas provided as input.

### Requirements
- The scripts must run in the database nodes.
- A directory is required in the source and in the target database, with enough space to store the exported data.
- Both export and import scripts require a TNS alias to connect to the precise PDB. This TNS alias must map to a service that is attached to a SINGLE instance of the RAC configuration. You must create this instance-specific service and an alias for it in tnsnames.ora.   
  For example:  
  `[oracle@fmwdbnode1 ~]$ srvctl add service -db $ORACLE_UNQNAME -service export_soaedg.example.com -preferred SOADB1 -pdb SOADB_pdb1`  
  `[oracle@fmwdbnode1 ~]$ srvctl start service -s  export_soaedg.example.com -db $ORACLE_UNQNAME`  
  `[oracle@fmwdbnode1 ~]$ lsnrctl status | grep export_soaedg.example.com`  
  `Service "export_soaedg.example.com" has 1 instance(s).`  
  `[oracle@fmwdbnode1 ~]$ cat /u01/app/oracle/product/23.0.0.0/dbhome_1/network/admin/tnsnames.ora | grep export`  
  `EXPORT_SOADB_PDB1=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=dbexample-scan.dbsubnet.vcnexample.oraclevcn.com)(PORT=1521))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=export_soaedg.example.com)(FAILOVER_MODE=(TYPE=select)(METHOD=basic))))`  

### Considerations
- Schemas, tablespaces, and users that are not part of the FMW metadata schemas are not included in the export and import.
- The queues of the FMW schemas are stopped in the source database for the export operation. They are started again once the information is exported.
